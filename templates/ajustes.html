{% extends "base.html" %}

{% block title %}Phish-Mon Ajustes{% endblock %}

{% block contenido %}
  <div class="container">
    <h1 class="display-3">Ajustes</h1>


    <h4>Proxies</h4>
    <a href='{% url 'crea-proxy' %}' class="btn btn-info">Nuevo Proxy</a><br/>
    {% for proxy in proxies %}
      
      HTTP: {{ proxy.http }},
      HTTPS: {{ proxy.https }} 
      <a href='{% url "actualiza-proxy" pk=proxy.pk %}'>Actualiza</a>
      <a href='{% url "elimina-proxy" pk=proxy.pk %}'>Elimina</a>
    {% endfor %}

    <br/><br/>

    <h4>Recursos</h4>
    <a href='{% url 'crea-recurso' %}' class="btn btn-info">Nuevo Recurso</a><br/>
    {% for recurso in recursos %}
      {% if recurso.es_phishtank %}
        Llave de API de phishtank: {{ recurso.recurso }}
      {% else %}
        URL: {{ recurso.recurso }}
      {% endif %}
      <br/>
      Número máximo de URLs por consulta:
      {% if recurso.max_urls >= 0 %}
        {{ recurso.max_urls }}
      {% else %}
        Sin límite
      {% endif %}
      <br/>
      <a href='{% url "actualiza-recurso" pk=recurso.pk %}'>Actualiza</a>
      <a href='{% url "elimina-recurso" pk=recurso.pk %}'>Elimina</a>
      <br/>
      <br/>
    {% endfor %}

    <br/>
    
    <h4>
      <form action="" method="post">
        {% csrf_token %}
        {% include 'form.html' with form=asunto_form %}
        <input type="submit" name="cambia-asunto" class="uk-button uk-button-default" value="Modificar" />
      </form>

      <form action="" method="post">
        {% csrf_token %}
        {% include 'form.html' with form=mensaje_form %}
        <input type="submit" name="cambia-mensaje" class="uk-button uk-button-default" value="Modificar" />
      </form>

      Cambia frecuencia de actualización de base de datos (horas)
      <form action="" method="post">
        {% csrf_token %}
        {% include 'form.html' with form=actualizacion_form %}
        <input type="submit" name="cambia-actualizacion" value="Modificar" />
      </form>
      
      Cambia frecuencia de verificación de URLs (horas)
      <form action="" method="post">
        {% csrf_token %}
        {% include 'form.html' with form=verificacion_form %}
        <input type="submit" name="cambia-verificacion" value="Modificar" />
      </form>

      <a href='{% url 'ofuscaciones' %}'>Modificar métodos de ofuscación</a><br/>
      <a href='{% url 'entidades' %}'>Modificar entidades</a>
  </div>
{% endblock %}
